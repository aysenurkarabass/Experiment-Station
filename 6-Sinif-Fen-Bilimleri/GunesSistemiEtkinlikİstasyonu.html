<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GÃ¼neÅŸ Sistemi MacerasÄ± - 6. SÄ±nÄ±f</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #000000;
            color: white;
            overflow-x: hidden;
            user-select: none;
        }

        /* Uzay Arka Plan Animasyonu */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 40px 70px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 50px 160px, #ddd, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 90px 40px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 130px 80px, #fff, rgba(0,0,0,0));
            background-repeat: repeat;
            background-size: 200px 200px;
            animation: twinkle 5s infinite;
            z-index: -1;
            opacity: 0.5;
        }

        @keyframes twinkle {
            0% { transform: translateY(0); }
            100% { transform: translateY(-100px); }
        }

        /* Ortak Resim Stilleri */
        .planet-img {
            object-fit: contain; 
            filter: drop-shadow(0 0 5px rgba(255,255,255,0.3)); 
            transition: transform 0.3s;
        }
        .planet-img:hover {
            transform: scale(1.1);
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.5));
        }

        /* Oyun AlanÄ± KartlarÄ± */
        .glass-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1rem;
        }

        /* SÃ¼rÃ¼kle BÄ±rak Hedefleri */
        .drop-zone {
            border: 2px dashed rgba(255,255,255,0.3);
            transition: background 0.3s;
        }
        .drop-zone.active {
            background: rgba(255,255,255,0.1);
            border-color: #4facfe;
        }
        
        .correct { border-color: #00ff00 !important; background: rgba(0, 255, 0, 0.1) !important; }
        .wrong { border-color: #ff0000 !important; animation: shake 0.5s; }

        /* Act 1 Specific Styles */
        .name-box {
            cursor: grab;
            background: rgba(59, 130, 246, 0.8);
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
        }
        .name-box:active { cursor: grabbing; }
        
        .slot-box {
            width: 100%;
            height: 45px;
            border: 2px dashed #6b7280;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.3);
            margin-top: 10px;
        }

        /* Act 4 Specific Styles */
        .act4-slot {
            width: 80px;
            height: 100px;
            border: 2px dashed #6b7280;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.05);
            transition: all 0.3s;
            position: relative;
        }
        .act4-draggable {
            cursor: grab;
            transition: transform 0.2s;
        }
        .act4-draggable:active {
            cursor: grabbing;
            transform: scale(1.1);
        }

        /* Custom Scrollbar */
        #orbit-path-container::-webkit-scrollbar {
            height: 8px;
        }
        #orbit-path-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        #orbit-path-container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-start p-4">

    <div class="stars"></div>

    <!-- HEADER (Visible on Activity Pages) -->
    <header id="main-header" class="fixed top-0 left-0 w-full flex justify-between items-center p-4 bg-black/80 backdrop-blur-md border-b border-white/10 z-50 hidden h-20">
        <div class="flex items-center gap-4">
            <img src="https://ogrenci.e12.com.tr/logo/tr/logo.svg" alt="Okul Logosu" class="h-10 md:h-12 drop-shadow-[0_0_5px_rgba(255,255,255,0.5)]">
            <h1 class="text-xl md:text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-purple-400 hidden sm:block">GÃ¼neÅŸ Sistemi Ä°stasyonu</h1>
        </div>
        <button onclick="goHome()" class="px-4 py-2 bg-red-500 hover:bg-red-600 rounded-lg text-white font-bold flex items-center gap-2 transition shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z"/>
            </svg>
            <span class="hidden sm:inline">Ana MenÃ¼</span>
        </button>
    </header>

    <!-- MAIN MENU -->
    <div id="home-screen" class="w-full max-w-5xl text-center my-auto">
        <!-- Logo Added Here -->
        <img src="https://ogrenci.e12.com.tr/logo/tr/logo.svg" alt="Okul Logosu" class="h-20 md:h-24 mx-auto mb-6 drop-shadow-[0_0_15px_rgba(255,255,255,0.4)]">
        
        <h1 class="text-5xl md:text-6xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-orange-400 to-red-500">
            Uzay KaÅŸifleri
        </h1>
        <p class="text-xl text-gray-300 mb-12">6. SÄ±nÄ±f GÃ¼neÅŸ Sistemi Etkinlik Ä°stasyonu</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 px-4">
            <!-- Activity 1 -->
            <div onclick="startActivity(1)" class="glass-panel p-8 cursor-pointer hover:bg-white/10 transition group">
                <div class="text-4xl mb-4">ğŸ§©</div>
                <h2 class="text-2xl font-bold mb-2 text-blue-300 group-hover:text-blue-200">1. EÅŸleÅŸtirmece</h2>
                <p class="text-sm text-gray-400">SÃ¼rÃ¼kle bÄ±rak ile gezegenleri eÅŸleÅŸtir.</p>
            </div>
            
            <!-- Activity 2 -->
            <div onclick="startActivity(2)" class="glass-panel p-8 cursor-pointer hover:bg-white/10 transition group">
                <div class="text-4xl mb-4">ğŸª</div>
                <h2 class="text-2xl font-bold mb-2 text-purple-300 group-hover:text-purple-200">2. Ä°Ã§ ve DÄ±ÅŸ Gezegenler</h2>
                <p class="text-sm text-gray-400">Gezegenleri yapÄ±larÄ±na gÃ¶re gruplandÄ±r.</p>
            </div>

            <!-- Activity 3 -->
            <div onclick="startActivity(3)" class="glass-panel p-8 cursor-pointer hover:bg-white/10 transition group">
                <div class="text-4xl mb-4">â“</div>
                <h2 class="text-2xl font-bold mb-2 text-green-300 group-hover:text-green-200">3. Uzay BulmacasÄ±</h2>
                <p class="text-sm text-gray-400">SorularÄ± bil, gezegenleri tanÄ±.</p>
            </div>

            <!-- Activity 4 -->
            <div onclick="startActivity(4)" class="glass-panel p-8 cursor-pointer hover:bg-white/10 transition group">
                <div class="text-4xl mb-4">â˜€ï¸</div>
                <h2 class="text-2xl font-bold mb-2 text-yellow-300 group-hover:text-yellow-200">4. GÃ¼neÅŸ'e SÄ±ralama</h2>
                <p class="text-sm text-gray-400">Gezegenleri GÃ¼neÅŸ'e yakÄ±nlÄ±klarÄ±na gÃ¶re diz.</p>
            </div>
        </div>
    </div>

    <!-- ACTIVITY 1: MATCHING (DRAG & DROP) -->
    <div id="activity-1" class="hidden w-full max-w-6xl text-center mt-24 md:mt-28">
        <h2 class="text-3xl font-bold mb-4">Gezegen Ä°simlerini EÅŸleÅŸtir</h2>
        <p class="mb-6 text-blue-200">Ä°sim kutularÄ±nÄ± sÃ¼rÃ¼kleyip doÄŸru gezegenin altÄ±ndaki boÅŸluÄŸa bÄ±rak, sonra kontrol et!</p>
        
        <div id="act1-names-container" class="flex flex-wrap justify-center gap-3 mb-8 min-h-[60px] p-4 glass-panel">
            <!-- Names generated by JS -->
        </div>

        <div id="act1-grid" class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
            <!-- Generated by JS -->
        </div>

        <div class="flex justify-center gap-4">
            <button onclick="checkActivity1()" class="px-6 py-3 bg-green-500 hover:bg-green-600 rounded-lg text-white font-bold text-lg shadow-lg transition transform hover:scale-105">âœ… Kontrol Et</button>
            <button onclick="initActivity1()" class="px-6 py-3 bg-gray-500 hover:bg-gray-600 rounded-lg text-white font-bold text-lg shadow-lg transition transform hover:scale-105">ğŸ”„ SÄ±fÄ±rla</button>
        </div>
        
        <div id="act1-feedback" class="mt-4 text-xl font-bold h-8"></div>
    </div>

    <!-- ACTIVITY 2: SORTING -->
    <div id="activity-2" class="hidden w-full max-w-5xl mt-24 md:mt-28">
        <h2 class="text-3xl font-bold mb-2 text-center">Ä°Ã§ (Karasal) ve DÄ±ÅŸ (Gazsal) Gezegenler</h2>
        <p class="mb-6 text-center text-gray-400">AÅŸaÄŸÄ±daki gezegenleri tÄ±klayarak doÄŸru kutuya gÃ¶nder. (Ã–nce gezegene sonra ilgili kutuya tÄ±kla.)</p>

        <div class="flex justify-center gap-4 mb-8 min-h-[150px] items-end flex-wrap" id="act2-source">
            <!-- Source Planets -->
        </div>

        <div class="grid grid-cols-2 gap-8 min-h-[300px]">
            <div id="zone-inner" class="drop-zone rounded-xl flex flex-col items-center justify-start p-4 relative" onclick="handleZoneClick('ic')">
                <h3 class="text-xl font-bold mb-2 text-orange-400">Ä°Ã§ Gezegenler (Karasal)</h3>
                <div class="zone-content flex flex-wrap gap-4 justify-center items-end"></div>
            </div>
            <div id="zone-outer" class="drop-zone rounded-xl flex flex-col items-center justify-start p-4 relative" onclick="handleZoneClick('dis')">
                <h3 class="text-xl font-bold mb-2 text-blue-400">DÄ±ÅŸ Gezegenler (Gazsal)</h3>
                <div class="zone-content flex flex-wrap gap-4 justify-center items-end"></div>
            </div>
        </div>
        <div id="act2-message" class="text-center mt-4 text-xl"></div>
    </div>

    <!-- ACTIVITY 3: QUIZ -->
    <div id="activity-3" class="hidden w-full max-w-2xl mt-24 md:mt-28">
        <div class="glass-panel p-8 text-center">
            <div class="mb-6">
                <span id="quiz-progress" class="text-sm uppercase tracking-widest text-gray-400">Soru 1/5</span>
                <h2 id="quiz-question" class="text-2xl md:text-3xl font-bold mt-4 mb-8">Soru buraya gelecek...</h2>
            </div>
            
            <div id="quiz-options" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Options generated by JS -->
            </div>
            
            <div id="quiz-feedback" class="mt-6 font-bold text-xl h-8"></div>
            <button id="quiz-next" onclick="nextQuestion()" class="mt-4 px-6 py-2 bg-green-500 rounded-lg hidden">Sonraki Soru</button>
        </div>
    </div>

    <!-- ACTIVITY 4: ORDERING (UPDATED) -->
    <div id="activity-4" class="hidden w-full max-w-7xl flex flex-col items-center mt-24 md:mt-28">
        <h2 class="text-3xl font-bold mb-4">GÃ¼neÅŸ'e YakÄ±nlÄ±k SÄ±ralamasÄ±</h2>
        <p class="mb-4 text-yellow-200">Gezegenleri bankadan alÄ±p GÃ¼neÅŸ'e yakÄ±nlÄ±k sÄ±rasÄ±na gÃ¶re kutulara sÃ¼rÃ¼kle!</p>

        <div class="flex items-center w-full gap-4 overflow-x-auto pb-8 justify-start px-4">
            <!-- The Sun -->
            <div class="flex flex-col items-center mr-4 shrink-0">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/The_Sun_by_the_Atmospheric_Imaging_Assembly_of_NASA%27s_Solar_Dynamics_Observatory_-_20100819.jpg/220px-The_Sun_by_the_Atmospheric_Imaging_Assembly_of_NASA%27s_Solar_Dynamics_Observatory_-_20100819.jpg" 
                     class="w-40 h-40 rounded-full shadow-[0_0_80px_#ff8c00] object-cover">
                <span class="font-bold text-yellow-500 mt-2 text-xl">GÃœNEÅ</span>
            </div>

            <!-- Slots for ordered planets -->
            <div id="orbit-path" class="flex gap-2 items-center h-48">
                <!-- Drop Slots generated by JS -->
            </div>
        </div>

        <!-- Planet Bank -->
        <div class="glass-panel p-6 mt-4 w-full min-h-[160px]">
            <h3 class="text-center mb-4 text-gray-400">Gezegen BankasÄ± (SÃ¼rÃ¼kle)</h3>
            <div id="act4-bank" class="flex flex-wrap gap-8 justify-center items-end" ondragover="act4AllowDrop(event)" ondrop="act4Drop(event, 'bank')">
                <!-- Planets generated by JS -->
            </div>
        </div>

        <div class="flex justify-center gap-4 mt-6">
            <button onclick="checkActivity4()" class="px-6 py-3 bg-green-500 hover:bg-green-600 rounded-lg text-white font-bold text-lg shadow-lg transition transform hover:scale-105">âœ… SÄ±ralamayÄ± Kontrol Et</button>
            <button onclick="initActivity4()" class="px-6 py-3 bg-gray-500 hover:bg-gray-600 rounded-lg text-white font-bold text-lg shadow-lg transition transform hover:scale-105">ğŸ”„ SÄ±fÄ±rla</button>
        </div>
        
        <div id="act4-message" class="mt-6 text-2xl font-bold text-center h-8"></div>

        <!-- Correct Answer Section (Initially Hidden) -->
        <div id="act4-correct-answer" class="hidden w-full mt-8 p-4 bg-white/10 rounded-xl border border-green-500/50">
            <h3 class="text-green-400 text-xl font-bold mb-4 text-center">DoÄŸru SÄ±ralama:</h3>
            <div class="flex flex-wrap justify-center gap-4 items-end">
                <!-- Generated by JS -->
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---
        const planets = [
            { 
                id: 'merkur', 
                name: 'MerkÃ¼r', 
                type: 'ic', 
                img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Mercury_in_color_-_Prockter07_centered.jpg/242px-Mercury_in_color_-_Prockter07_centered.jpg', 
                style: 'width: 40px; height: 40px; border-radius: 50%;', 
                order: 1 
            },
            { 
                id: 'venus', 
                name: 'VenÃ¼s', 
                type: 'ic', 
                img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/Venus-real_color.jpg/242px-Venus-real_color.jpg', 
                style: 'width: 60px; height: 60px; border-radius: 50%;', 
                order: 2 
            },
            { 
                id: 'dunya', 
                name: 'DÃ¼nya', 
                type: 'ic', 
                img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/The_Earth_seen_from_Apollo_17.jpg/242px-The_Earth_seen_from_Apollo_17.jpg', 
                style: 'width: 65px; height: 65px; border-radius: 50%;', 
                order: 3 
            },
            { 
                id: 'mars', 
                name: 'Mars', 
                type: 'ic', 
                img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/OSIRIS_Mars_true_color.jpg/242px-OSIRIS_Mars_true_color.jpg', 
                style: 'width: 50px; height: 50px; border-radius: 50%;', 
                order: 4 
            },
            { 
                id: 'jupiter', 
                name: 'JÃ¼piter', 
                type: 'dis', 
                img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Jupiter_and_its_shrunken_Great_Red_Spot.jpg/242px-Jupiter_and_its_shrunken_Great_Red_Spot.jpg', 
                style: 'width: 130px; height: 130px; border-radius: 50%;', 
                order: 5 
            },
            { 
                id: 'saturn', 
                name: 'SatÃ¼rn', 
                type: 'dis', 
                img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Saturn_during_Equinox.jpg/300px-Saturn_during_Equinox.jpg', 
                style: 'width: 150px; height: auto; mix-blend-mode: screen;', 
                order: 6 
            },
            { 
                id: 'uranus', 
                name: 'UranÃ¼s', 
                type: 'dis', 
                img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Uranus2.jpg/242px-Uranus2.jpg', 
                style: 'width: 85px; height: 85px; border-radius: 50%;', 
                order: 7 
            },
            { 
                id: 'neptun', 
                name: 'NeptÃ¼n', 
                type: 'dis', 
                img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Neptune_Full.jpg/242px-Neptune_Full.jpg', 
                style: 'width: 80px; height: 80px; border-radius: 50%;', 
                order: 8 
            }
        ];

        const quizQuestions = [
            { q: "GÃ¼neÅŸ sisteminin en bÃ¼yÃ¼k gezegeni hangisidir?", a: "JÃ¼piter", options: ["DÃ¼nya", "JÃ¼piter", "Mars", "SatÃ¼rn"] },
            { q: "Hangi gezegen 'KÄ±zÄ±l Gezegen' olarak bilinir?", a: "Mars", options: ["VenÃ¼s", "Mars", "MerkÃ¼r", "JÃ¼piter"] },
            { q: "GÃ¼neÅŸ'e en yakÄ±n gezegen hangisidir?", a: "MerkÃ¼r", options: ["DÃ¼nya", "VenÃ¼s", "MerkÃ¼r", "NeptÃ¼n"] },
            { q: "HalkalarÄ± en belirgin olan gezegen hangisidir?", a: "SatÃ¼rn", options: ["UranÃ¼s", "SatÃ¼rn", "JÃ¼piter", "NeptÃ¼n"] },
            { q: "Yan yatmÄ±ÅŸ varil gibi dÃ¶nen buz devi hangisidir?", a: "UranÃ¼s", options: ["NeptÃ¼n", "UranÃ¼s", "SatÃ¼rn", "VenÃ¼s"] }
        ];

        // --- STATE ---
        let selectedPlanetId = null; 
        let currentQuizIndex = 0; 
        let quizScore = 0;

        // --- NAVIGATION ---
        function goHome() {
            document.getElementById('home-screen').classList.remove('hidden');
            document.getElementById('main-header').classList.add('hidden');
            ['activity-1', 'activity-2', 'activity-3', 'activity-4'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            window.scrollTo(0,0);
        }

        function startActivity(num) {
            document.getElementById('home-screen').classList.add('hidden');
            document.getElementById('main-header').classList.remove('hidden');
            document.getElementById('main-header').classList.add('flex'); // Ensure flex is added
            ['activity-1', 'activity-2', 'activity-3', 'activity-4'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(`activity-${num}`).classList.remove('hidden');
            window.scrollTo(0,0);

            if (num === 1) initActivity1();
            if (num === 2) initActivity2();
            if (num === 3) initActivity3();
            if (num === 4) initActivity4();
        }

        // --- ACTIVITY 1: MATCHING (DRAG & DROP) ---
        let draggedItem = null;

        function initActivity1() {
            const grid = document.getElementById('act1-grid');
            const namesContainer = document.getElementById('act1-names-container');
            const feedback = document.getElementById('act1-feedback');
            
            grid.innerHTML = '';
            namesContainer.innerHTML = '';
            feedback.innerHTML = '';
            
            const displayPlanets = [...planets].sort(() => Math.random() - 0.5);

            displayPlanets.forEach(p => {
                const card = document.createElement('div');
                card.className = "flex flex-col items-center bg-white/5 p-4 rounded-lg min-h-[180px] justify-between";
                
                const visualWrapper = document.createElement('div');
                visualWrapper.className = "h-32 flex items-center justify-center w-full";
                
                const visual = document.createElement('img');
                visual.src = p.img;
                visual.className = "planet-img";
                visual.style = p.style;
                visual.style.maxWidth = "100%";
                visual.style.maxHeight = "100%";
                visual.style.pointerEvents = 'none'; 
                visual.onerror = function() { this.style.display='none'; };

                visualWrapper.appendChild(visual);
                
                const slot = document.createElement('div');
                slot.className = "slot-box";
                slot.dataset.expectedId = p.id;
                slot.ondragover = allowDrop;
                slot.ondrop = drop;
                
                card.appendChild(visualWrapper);
                card.appendChild(slot);
                grid.appendChild(card);
            });

            const shuffledNames = [...planets].sort(() => Math.random() - 0.5);
            shuffledNames.forEach(p => {
                const nameTag = document.createElement('div');
                nameTag.className = "name-box";
                nameTag.draggable = true;
                nameTag.innerText = p.name;
                nameTag.id = `drag-${p.id}`; 
                nameTag.dataset.planetId = p.id; 
                nameTag.ondragstart = dragStart;
                namesContainer.appendChild(nameTag);
            });
        }

        function dragStart(ev) {
            draggedItem = ev.target;
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drop(ev) {
            ev.preventDefault();
            let targetSlot = ev.target;
            while(!targetSlot.classList.contains('slot-box') && !targetSlot.classList.contains('act1-names-container')) {
                 targetSlot = targetSlot.parentElement;
                 if(!targetSlot) return;
            }

            if (targetSlot.id === 'act1-names-container') {
                targetSlot.appendChild(draggedItem);
                return;
            }
            
            if (targetSlot.children.length > 0) {
                const existing = targetSlot.children[0];
                document.getElementById('act1-names-container').appendChild(existing);
            }
            
            targetSlot.appendChild(draggedItem);
            draggedItem = null;
        }

        document.getElementById('act1-names-container').ondragover = allowDrop;
        document.getElementById('act1-names-container').ondrop = drop;

        function checkActivity1() {
            const slots = document.querySelectorAll('.slot-box');
            let correctCount = 0;
            let allFilled = true;

            slots.forEach(slot => {
                const expected = slot.dataset.expectedId;
                slot.style.border = "2px dashed #6b7280"; 
                slot.style.backgroundColor = "rgba(0,0,0,0.3)";
                const existingFeedback = slot.parentNode.querySelector('.correction-text');
                if(existingFeedback) existingFeedback.remove();

                if (slot.children.length === 0) {
                    allFilled = false;
                    return;
                }

                const item = slot.children[0];
                const actual = item.dataset.planetId;

                if (expected === actual) {
                    slot.style.border = "2px solid #22c55e"; 
                    slot.style.backgroundColor = "rgba(34, 197, 94, 0.2)";
                    correctCount++;
                } else {
                    slot.style.border = "2px solid #ef4444"; 
                    slot.style.backgroundColor = "rgba(239, 68, 68, 0.2)";
                    const correctPlanet = planets.find(p => p.id === expected);
                    const correction = document.createElement('div');
                    correction.className = "correction-text text-sm text-green-400 mt-1 font-bold animate-pulse";
                    correction.innerText = `DoÄŸrusu: ${correctPlanet.name}`;
                    slot.parentNode.appendChild(correction);
                }
            });

            const feedback = document.getElementById('act1-feedback');
            if (correctCount === 8) {
                feedback.innerHTML = '<span class="text-green-400">Tebrikler! Hepsi doÄŸru! ğŸŒŸ</span>';
            } else if (!allFilled) {
                feedback.innerHTML = '<span class="text-yellow-400">LÃ¼tfen tÃ¼m boÅŸluklarÄ± doldurunuz.</span>';
            } else {
                feedback.innerHTML = '<span class="text-red-400">BazÄ± hatalar var, dÃ¼zeltmelerine bak!</span>';
            }
        }

        // --- ACTIVITY 2: SORTING ---
        function initActivity2() {
            const source = document.getElementById('act2-source');
            source.innerHTML = '';
            document.getElementById('zone-inner').querySelector('.zone-content').innerHTML = '';
            document.getElementById('zone-outer').querySelector('.zone-content').innerHTML = '';
            document.getElementById('act2-message').innerText = '';
            act2SelectedPlanet = null;

            [...planets].sort(() => Math.random() - 0.5).forEach(p => {
                const div = document.createElement('div');
                div.className = `p-2 bg-white/10 rounded cursor-pointer hover:scale-110 transition act2-item flex flex-col items-center justify-end`;
                div.innerHTML = `<img src="${p.img}" class="planet-img mb-2" style="${p.style}" title="${p.name}"><span class="text-xs font-bold text-center">${p.name}</span>`;
                div.dataset.type = p.type;
                div.dataset.name = p.name;
                div.onclick = (e) => {
                    e.stopPropagation();
                    document.querySelectorAll('.act2-item').forEach(i => i.classList.remove('ring-4', 'ring-yellow-400'));
                    div.classList.add('ring-4', 'ring-yellow-400');
                    act2SelectedPlanet = div;
                };
                source.appendChild(div);
            });
        }

        function handleZoneClick(zoneType) {
            if (!act2SelectedPlanet) return;
            const correctType = act2SelectedPlanet.dataset.type;
            const targetZone = zoneType === 'ic' ? document.getElementById('zone-inner') : document.getElementById('zone-outer');
            
            if (correctType === zoneType) {
                act2SelectedPlanet.classList.remove('ring-4', 'ring-yellow-400', 'cursor-pointer', 'hover:scale-110');
                act2SelectedPlanet.onclick = null; 
                targetZone.querySelector('.zone-content').appendChild(act2SelectedPlanet);
                targetZone.classList.add('correct');
                setTimeout(() => targetZone.classList.remove('correct'), 500);
                act2SelectedPlanet = null;

                if (document.getElementById('act2-source').children.length === 0) {
                    document.getElementById('act2-message').innerHTML = '<span class="text-green-400">Tebrikler! Gezegenleri doÄŸru gruplandÄ±rdÄ±n. ğŸš€</span>';
                }
            } else {
                targetZone.classList.add('wrong');
                setTimeout(() => targetZone.classList.remove('wrong'), 500);
            }
        }

        // --- ACTIVITY 3: QUIZ ---
        function initActivity3() {
            currentQuizIndex = 0;
            quizScore = 0; 
            loadQuestion();
        }

        function loadQuestion() {
            const q = quizQuestions[currentQuizIndex];
            document.getElementById('quiz-question').innerText = q.q;
            document.getElementById('quiz-progress').innerText = `SORU ${currentQuizIndex + 1} / ${quizQuestions.length}`;
            document.getElementById('quiz-feedback').innerText = '';
            document.getElementById('quiz-next').classList.add('hidden');
            
            const opts = document.getElementById('quiz-options');
            opts.innerHTML = '';
            
            q.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "p-4 bg-white/10 rounded-lg hover:bg-white/20 text-left text-lg font-semibold transition";
                btn.innerText = opt;
                btn.onclick = () => checkQuiz(btn, opt, q.a);
                opts.appendChild(btn);
            });
        }

        function checkQuiz(btn, selected, correct) {
            const allBtns = document.getElementById('quiz-options').children;
            for(let b of allBtns) b.disabled = true;

            if (selected === correct) {
                quizScore++; 
                btn.classList.add('bg-green-500', 'text-white');
                document.getElementById('quiz-feedback').innerHTML = '<span class="text-green-400">DoÄŸru Cevap! â­</span>';
            } else {
                btn.classList.add('bg-red-500', 'text-white');
                document.getElementById('quiz-feedback').innerHTML = `<span class="text-red-400">YanlÄ±ÅŸ! DoÄŸru cevap: ${correct}</span>`;
            }
            document.getElementById('quiz-next').classList.remove('hidden');
        }

        function nextQuestion() {
            currentQuizIndex++;
            if (currentQuizIndex < quizQuestions.length) {
                loadQuestion();
            } else {
                document.getElementById('quiz-question').innerText = "Test TamamlandÄ±!";
                document.getElementById('quiz-options').innerHTML = `
                    <div class="text-center col-span-2">
                        <div class="text-6xl mb-4">ğŸ†</div>
                        <div class="text-3xl font-bold mb-2">Skorunuz</div>
                        <div class="text-5xl font-bold text-yellow-400 mb-6">${quizScore} / ${quizQuestions.length}</div>
                        <button onclick="initActivity3()" class="px-6 py-3 bg-blue-500 hover:bg-blue-600 rounded-lg text-white font-bold transition">Tekrar Dene</button>
                    </div>
                `;
                document.getElementById('quiz-feedback').innerText = "";
                document.getElementById('quiz-next').classList.add('hidden');
            }
        }

        // --- ACTIVITY 4: ORDERING (UPDATED) ---
        let act4DraggedItem = null;

        function initActivity4() {
            const bank = document.getElementById('act4-bank');
            const orbit = document.getElementById('orbit-path');
            const correctSection = document.getElementById('act4-correct-answer');
            
            bank.innerHTML = '';
            orbit.innerHTML = '';
            document.getElementById('act4-message').innerText = '';
            correctSection.classList.add('hidden');
            correctSection.querySelector('div').innerHTML = '';

            // Create 8 Slots
            for(let i=1; i<=8; i++) {
                const slot = document.createElement('div');
                slot.className = "act4-slot";
                slot.innerHTML = `<span class="text-gray-600 font-bold text-2xl absolute opacity-20">${i}</span>`;
                slot.dataset.slotIndex = i;
                slot.ondragover = act4AllowDrop;
                slot.ondrop = (ev) => act4Drop(ev, 'slot');
                orbit.appendChild(slot);
            }

            // Create Draggable Planets (Random Order)
            [...planets].sort(() => Math.random() - 0.5).forEach(p => {
                const div = document.createElement('div');
                div.className = "flex flex-col items-center act4-draggable";
                div.draggable = true;
                div.id = `act4-p-${p.id}`;
                div.dataset.planetId = p.id;
                div.ondragstart = act4DragStart;
                
                div.innerHTML = `<img src="${p.img}" class="planet-img" style="${p.style} pointer-events: none;"><span class="text-sm mt-1 select-none pointer-events-none">${p.name}</span>`;
                bank.appendChild(div);
            });
        }

        function act4DragStart(ev) {
            act4DraggedItem = ev.target;
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function act4AllowDrop(ev) {
            ev.preventDefault();
        }

        function act4Drop(ev, type) {
            ev.preventDefault();
            let target = ev.target;
            
            // Find valid target (Slot or Bank)
            if (type === 'slot') {
                while (!target.classList.contains('act4-slot')) {
                    target = target.parentElement;
                    if (!target) return;
                }
                
                // If slot occupied, return item to bank first
                if (target.children.length > 1) { // 1 because span number is always there
                     const existingItem = target.querySelector('.act4-draggable');
                     if(existingItem) {
                         document.getElementById('act4-bank').appendChild(existingItem);
                     }
                }
                target.appendChild(act4DraggedItem);
            } 
            else if (type === 'bank') {
                document.getElementById('act4-bank').appendChild(act4DraggedItem);
            }
            
            act4DraggedItem = null;
        }

        function checkActivity4() {
            const slots = document.querySelectorAll('.act4-slot');
            let correctCount = 0;
            let allFilled = true;
            const correctOrderDiv = document.querySelector('#act4-correct-answer div');
            correctOrderDiv.innerHTML = '';

            slots.forEach((slot, index) => {
                const expectedOrder = index + 1;
                const planetEl = slot.querySelector('.act4-draggable');
                
                // Reset styles
                slot.style.borderColor = "#6b7280";
                slot.style.background = "rgba(255,255,255,0.05)";

                if (!planetEl) {
                    allFilled = false;
                    return;
                }

                const planetId = planetEl.dataset.planetId;
                const correctPlanet = planets.find(p => p.order === expectedOrder);

                if (planetId === correctPlanet.id) {
                    // Correct
                    slot.style.borderColor = "#22c55e"; // Green
                    slot.style.background = "rgba(34, 197, 94, 0.2)";
                    correctCount++;
                } else {
                    // Wrong
                    slot.style.borderColor = "#ef4444"; // Red
                    slot.style.background = "rgba(239, 68, 68, 0.2)";
                }
            });

            const msg = document.getElementById('act4-message');
            const correctSection = document.getElementById('act4-correct-answer');

            if (!allFilled) {
                msg.innerHTML = '<span class="text-yellow-400">LÃ¼tfen tÃ¼m kutularÄ± doldurunuz.</span>';
                correctSection.classList.add('hidden');
                return;
            }

            if (correctCount === 8) {
                msg.innerHTML = '<span class="text-green-400">Harika! SÄ±ralama MÃ¼kemmel! ğŸš€ğŸŒŸ</span>';
                correctSection.classList.add('hidden');
            } else {
                msg.innerHTML = '<span class="text-red-400">BazÄ± hatalar var. DoÄŸru sÄ±ralama aÅŸaÄŸÄ±da! ğŸ‘‡</span>';
                correctSection.classList.remove('hidden');
                
                // Render Correct Order Strip
                planets.sort((a,b) => a.order - b.order).forEach(p => {
                    const item = document.createElement('div');
                    item.className = "flex flex-col items-center opacity-80";
                    item.innerHTML = `<img src="${p.img}" class="w-12 h-12 object-contain"><span class="text-xs text-green-300">${p.order}. ${p.name}</span>`;
                    correctOrderDiv.appendChild(item);
                });
            }
        }

    </script>
</body>
</html>