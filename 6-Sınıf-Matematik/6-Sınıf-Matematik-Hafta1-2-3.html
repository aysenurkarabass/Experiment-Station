<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galaktik Matematik Simülasyonu</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React ve ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel (JSX Derleyicisi) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Animasyonlar için özel CSS */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes pulse-ring {
            0% { transform: scale(0.8); opacity: 0.5; }
            100% { transform: scale(1.3); opacity: 0; }
        }
        .ring-animate {
            animation: pulse-ring 1s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-200">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- İkon Bileşenleri (SVG) ---
        const IconBox = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>
        );
        const IconShieldCheck = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="m9 12 2 2 4-4"/></svg>
        );
        const IconZap = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
        );
        const IconRepeat = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m17 2 4 4-4 4"/><path d="M3 11v-1a4 4 0 0 1 4-4h14"/><path d="m7 22-4-4 4-4"/><path d="M21 13v1a4 4 0 0 1-4 4H3"/></svg>
        );
        const IconArrowLeft = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
        );
        const IconCheck = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"/></svg>
        );
        const IconX = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        );
        const IconPlay = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="5 3 19 12 5 21 5 3"/></svg>
        );
        const IconRefreshCw = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>
        );
        const IconInfo = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
        );
        const IconRadio = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4.9 19.1C1 15.2 1 8.8 4.9 4.9"/><path d="M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5"/><circle cx="12" cy="12" r="2"/><path d="M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5"/><path d="M19.1 4.9C23 8.8 23 15.1 19.1 19"/></svg>
        );

        // --- Yardımcı Matematik Fonksiyonları ---
        const getFactors = (num) => {
          const factors = [];
          for (let i = 1; i <= num; i++) {
            if (num % i === 0) factors.push(i);
          }
          return factors;
        };

        const isPrime = (num) => {
          if (num <= 1) return false;
          for (let i = 2; i <= Math.sqrt(num); i++) {
            if (num % i === 0) return false;
          }
          return true;
        };

        const gcd = (a, b) => (!b ? a : gcd(b, a % b));
        const lcm = (a, b) => (a * b) / gcd(a, b);

        // --- MODÜL 1: KARGO DİZİLİMİ (Çarpanlar) ---
        const CargoModule = ({ onBack }) => {
          const [target, setTarget] = useState(12);
          const [rows, setRows] = useState(1);
          const [cols, setCols] = useState(1);
          const [message, setMessage] = useState("");
          const [success, setSuccess] = useState(false);

          const generateNew = () => {
            const targets = [12, 16, 18, 20, 24, 30, 36];
            setTarget(targets[Math.floor(Math.random() * targets.length)]);
            setRows(1);
            setCols(1);
            setMessage("Yeni kargo geldi. Düzenlemeye başla!");
            setSuccess(false);
          };

          const checkArrangement = () => {
            const current = rows * cols;
            if (current === target) {
              setSuccess(true);
              setMessage(`Harika! ${rows} x ${cols} = ${target}. Bu, ${target} sayısının bir çarpan çiftidir.`);
            } else if (current < target) {
              setMessage(`Yetersiz! Şu an ${current} kutu var. ${target} olması lazım.`);
            } else {
              setMessage(`Fazla! Şu an ${current} kutu var. ${target} olması lazım.`);
            }
          };

          return (
            <div className="flex flex-col items-center w-full max-w-4xl p-4 bg-slate-900 text-white rounded-xl shadow-2xl border border-slate-700 animate-in">
              <div className="flex justify-between w-full mb-6 items-center">
                <button onClick={onBack} className="flex items-center text-slate-400 hover:text-white transition"><IconArrowLeft className="mr-2" /> Ana Menü</button>
                <h2 className="text-2xl font-bold text-blue-400 flex items-center"><IconBox className="mr-2"/> Kargo Lojistiği</h2>
                <button onClick={generateNew} className="p-2 bg-blue-600 rounded hover:bg-blue-500"><IconRefreshCw size={20}/></button>
              </div>

              <div className="bg-slate-800 p-6 rounded-lg w-full text-center mb-6">
                <p className="text-lg mb-2">Hedef Kutu Sayısı: <span className="text-4xl font-bold text-yellow-400 block mt-2">{target}</span></p>
                <p className="text-slate-400 text-sm">Kaydırıcıları kullanarak kutuları dikdörtgen şeklinde diz ve hedef sayıya ulaş.</p>
              </div>

              <div className="flex flex-col md:flex-row gap-8 items-center w-full justify-center mb-8">
                <div className="space-y-6 w-64">
                  <div>
                    <label className="block text-sm font-medium mb-1 text-blue-300">Sıra Sayısı (Boy): {rows}</label>
                    <input type="range" min="1" max={target} value={rows} onChange={(e) => {setRows(parseInt(e.target.value)); setSuccess(false); setMessage("");}} className="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500" />
                  </div>
                  <div>
                    <label className="block text-sm font-medium mb-1 text-green-300">Sütun Sayısı (En): {cols}</label>
                    <input type="range" min="1" max={target} value={cols} onChange={(e) => {setCols(parseInt(e.target.value)); setSuccess(false); setMessage("");}} className="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-green-500" />
                  </div>
                  <button onClick={checkArrangement} className={`w-full py-3 rounded-lg font-bold transition ${success ? 'bg-green-600 hover:bg-green-500' : 'bg-indigo-600 hover:bg-indigo-500'}`}>
                    {success ? "Doğru Düzen!" : "Kontrol Et"}
                  </button>
                  <div className={`p-2 rounded text-center min-h-[3rem] ${success ? 'bg-green-900/50 text-green-200' : 'bg-slate-800 text-slate-300'}`}>
                    {message || "Ayarlama yap..."}
                  </div>
                </div>

                <div className="bg-slate-950 p-4 rounded-lg border-2 border-slate-700 overflow-auto max-w-full" style={{minHeight: '300px', minWidth: '300px', display: 'flex', alignItems: 'center', justifyContent: 'center'}}>
                  <div style={{
                    display: 'grid',
                    gridTemplateRows: `repeat(${rows}, 1fr)`,
                    gridTemplateColumns: `repeat(${cols}, 1fr)`,
                    gap: '4px',
                  }}>
                    {Array.from({ length: rows * cols }).map((_, i) => (
                      <div key={i} className={`w-6 h-6 md:w-8 md:h-8 rounded-sm transition-all duration-300 ${i < target ? (success ? 'bg-green-500 scale-100' : 'bg-blue-500 scale-95') : 'bg-red-500 opacity-50'}`}></div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          );
        };

        // --- MODÜL 2: GÜVENLİK KAPISI (Bölünebilme) ---
        const SecurityModule = ({ onBack }) => {
          const [shipId, setShipId] = useState(0);
          const [rules, setRules] = useState([]);
          const [feedback, setFeedback] = useState(null); // 'correct', 'wrong', null
          const [score, setScore] = useState(0);

          const generateShip = () => {
            const id = Math.floor(Math.random() * 900) + 100; // 3 basamaklı
            const possibleRules = [
              { num: 2, text: "2 ile tam bölünmeli" },
              { num: 3, text: "3 ile tam bölünmeli" },
              { num: 5, text: "5 ile tam bölünmeli" },
              { num: 9, text: "9 ile tam bölünmeli" },
              { num: 10, text: "10 ile tam bölünmeli" },
              { num: 6, text: "6 ile tam bölünmeli" }
            ];
            const rule = possibleRules[Math.floor(Math.random() * possibleRules.length)];
            
            setShipId(id);
            setRules([rule]);
            setFeedback(null);
          };

          useEffect(() => {
            generateShip();
          }, []);

          const handleDecision = (allow) => {
            const rule = rules[0];
            const isDivisible = shipId % rule.num === 0;
            const isCorrect = (isDivisible && allow) || (!isDivisible && !allow);

            if (isCorrect) {
              setFeedback('correct');
              setScore(s => s + 10);
            } else {
              setFeedback('wrong');
              setScore(s => Math.max(0, s - 5));
            }
          };

          const getHint = (num, ruleNum) => {
            if (ruleNum === 2) return `Son basamak (${num % 10}) çift mi?`;
            if (ruleNum === 5) return `Son basamak (${num % 10}) 0 veya 5 mi?`;
            if (ruleNum === 10) return `Son basamak (${num % 10}) 0 mı?`;
            if (ruleNum === 3) {
              const sum = String(num).split('').reduce((a,b)=>parseInt(a)+parseInt(b), 0);
              return `Rakamları toplamı: ${sum}. 3'ün katı mı?`;
            }
            if (ruleNum === 9) {
              const sum = String(num).split('').reduce((a,b)=>parseInt(a)+parseInt(b), 0);
              return `Rakamları toplamı: ${sum}. 9'un katı mı?`;
            }
            if (ruleNum === 6) return "Hem 2'ye hem 3'e bölünüyor mu?";
            return "";
          };

          return (
            <div className="flex flex-col items-center w-full max-w-4xl p-4 bg-gray-900 text-white rounded-xl shadow-2xl border border-gray-700 animate-in">
              <div className="flex justify-between w-full mb-6 items-center">
                <button onClick={onBack} className="flex items-center text-gray-400 hover:text-white transition"><IconArrowLeft className="mr-2" /> Ana Menü</button>
                <h2 className="text-2xl font-bold text-purple-400 flex items-center"><IconShieldCheck className="mr-2"/> Güvenlik Kapısı</h2>
                <div className="bg-gray-800 px-4 py-1 rounded">Puan: {score}</div>
              </div>

              <div className="flex flex-col items-center justify-center w-full py-10 bg-gray-800 rounded-xl relative overflow-hidden">
                <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"></div>
                
                <div className="z-10 text-center mb-8">
                  <p className="text-gray-400 text-sm uppercase tracking-widest mb-2">Gelen Gemi ID</p>
                  <div className="text-7xl font-mono font-bold text-white tracking-widest bg-black px-6 py-2 rounded border border-gray-600 shadow-[0_0_20px_rgba(255,255,255,0.2)]">
                    {shipId}
                  </div>
                </div>

                <div className="z-10 bg-gray-700/50 p-4 rounded-lg mb-8 border border-gray-600 backdrop-blur-sm w-full max-w-md text-center">
                  <h3 className="text-yellow-400 font-bold text-lg mb-1">GÜVENLİK PROTOKOLÜ</h3>
                  <p className="text-xl">{rules[0]?.text}</p>
                </div>

                {feedback === null ? (
                  <div className="flex gap-6 z-10">
                    <button onClick={() => handleDecision(false)} className="px-8 py-4 bg-red-600 hover:bg-red-500 text-white rounded-lg font-bold text-lg shadow-lg flex items-center gap-2 transform hover:scale-105 transition">
                      <IconX size={24}/> REDDET
                    </button>
                    <button onClick={() => handleDecision(true)} className="px-8 py-4 bg-green-600 hover:bg-green-500 text-white rounded-lg font-bold text-lg shadow-lg flex items-center gap-2 transform hover:scale-105 transition">
                      <IconCheck size={24}/> ONAYLA (Geçir)
                    </button>
                  </div>
                ) : (
                  <div className={`z-10 p-6 rounded-lg text-center animate-in flex flex-col items-center gap-4 ${feedback === 'correct' ? 'bg-green-500/90 text-white' : 'bg-red-500/90 text-white'}`}>
                    <div>
                        <p className="text-2xl font-bold mb-2">{feedback === 'correct' ? "DOĞRU KARAR!" : "HATALI!"}</p>
                        <p className="text-sm bg-black/20 p-2 rounded">{getHint(shipId, rules[0].num)}</p>
                    </div>
                    
                    {feedback === 'correct' ? (
                        <button onClick={generateShip} className="px-8 py-3 bg-white text-green-700 font-bold rounded-lg hover:bg-green-50 transition shadow-lg flex items-center gap-2 transform hover:scale-105">
                           Sıradaki Gemi <IconArrowLeft className="rotate-180" size={20}/>
                        </button>
                    ) : (
                        <div className="flex flex-col items-center animate-in">
                            <p className="mb-2 font-bold text-red-100">Güvenlik ihlali tespit edildi! Görev sonlandırılıyor.</p>
                            <button onClick={onBack} className="px-8 py-3 bg-white text-red-700 font-bold rounded-lg hover:bg-red-50 transition shadow-lg flex items-center gap-2 transform hover:scale-105">
                               <IconArrowLeft size={20}/> Ana Menüye Dön
                            </button>
                        </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          );
        };

        // --- MODÜL 3: YAKIT RAFİNERİSİ (Asal Çarpanlar) ---
        const RefineryModule = ({ onBack }) => {
          const [currentNum, setCurrentNum] = useState(60);
          const [history, setHistory] = useState([60]);
          const [factorsFound, setFactorsFound] = useState([]);
          const [message, setMessage] = useState("Yakıt tankını saflaştır.");
          const [isComplete, setIsComplete] = useState(false);

          const startNew = () => {
            const numbers = [24, 30, 36, 40, 42, 45, 48, 50, 60, 72, 75, 80, 84, 90, 100];
            const num = numbers[Math.floor(Math.random() * numbers.length)];
            setCurrentNum(num);
            setHistory([num]);
            setFactorsFound([]);
            setMessage("Bileşik sayıyı asal parçalara ayır.");
            setIsComplete(false);
          };

          const divideBy = (divisor) => {
            if (isComplete) return;

            if (currentNum % divisor === 0) {
              const nextNum = currentNum / divisor;
              setFactorsFound([...factorsFound, divisor]);
              setHistory([...history, nextNum]);
              setCurrentNum(nextNum);
              
              if (nextNum === 1) {
                setIsComplete(true);
                setMessage("Tebrikler! Tank tamamen saflaştırıldı.");
              } else {
                setMessage(`Başarılı! ${divisor} ile bölündü. Kalan: ${nextNum}`);
              }
            } else {
              setMessage(`Hata! ${currentNum} sayısı ${divisor} ile bölünemez.`);
            }
          };

          return (
            <div className="flex flex-col items-center w-full max-w-4xl p-4 bg-amber-950 text-amber-50 rounded-xl shadow-2xl border border-amber-800 animate-in">
              <div className="flex justify-between w-full mb-6 items-center">
                <button onClick={onBack} className="flex items-center text-amber-300 hover:text-white transition"><IconArrowLeft className="mr-2" /> Ana Menü</button>
                <h2 className="text-2xl font-bold text-amber-500 flex items-center"><IconZap className="mr-2"/> Yakıt Rafinerisi</h2>
                <button onClick={startNew} className="p-2 bg-amber-700 rounded hover:bg-amber-600"><IconRefreshCw size={20}/></button>
              </div>

              <div className="flex flex-col md:flex-row gap-8 w-full">
                <div className="flex-1 bg-amber-900/40 p-6 rounded-lg border border-amber-800 flex flex-col items-center">
                  <div className="mb-4 text-center">
                    <p className="text-amber-200 text-sm mb-2">MEVCUT KÜTLE</p>
                    <div className={`text-6xl font-bold transition-all ${isComplete ? 'text-green-400' : 'text-white'}`}>
                      {currentNum}
                    </div>
                  </div>

                  {!isComplete && (
                    <div className="grid grid-cols-2 gap-3 w-full max-w-xs">
                      {[2, 3, 5, 7].map(p => (
                        <button 
                          key={p} 
                          onClick={() => divideBy(p)}
                          className="bg-amber-600 hover:bg-amber-500 text-white font-bold py-4 rounded text-xl shadow-lg border-b-4 border-amber-800 hover:border-amber-700 active:border-0 active:translate-y-1 transition-all"
                        >
                          ÷ {p}
                        </button>
                      ))}
                    </div>
                  )}
                  
                  <div className="mt-6 min-h-[3rem] text-center text-amber-200 font-medium bg-black/20 p-3 rounded w-full">
                    {message}
                  </div>
                </div>

                <div className="flex-1 bg-black/30 p-6 rounded-lg border border-amber-800 flex flex-col">
                  <h3 className="text-amber-400 font-bold mb-4 border-b border-amber-800 pb-2">AYRIŞTIRMA GEÇMİŞİ</h3>
                  <div className="space-y-2">
                    {history.slice(0, -1).map((h, i) => (
                      <div key={i} className="flex items-center text-lg animate-in fade-in slide-in-from-left duration-500">
                        <span className="w-12 text-right font-mono text-gray-400">{h}</span>
                        <span className="mx-2 text-amber-500">÷</span>
                        <span className="w-8 h-8 rounded-full bg-amber-600 flex items-center justify-center font-bold text-white text-sm border border-amber-400">
                          {factorsFound[i]}
                        </span>
                        <span className="mx-2 text-amber-500">=</span>
                        <span className="font-mono">{history[i+1]}</span>
                      </div>
                    ))}
                  </div>
                  
                  {isComplete && (
                    <div className="mt-6 p-4 bg-green-900/30 border border-green-600 rounded text-center">
                      <p className="text-green-300 text-sm">ASAL ÇARPANLAR</p>
                      <div className="text-2xl font-bold text-white mt-1">
                        {factorsFound.join(" x ")}
                      </div>
                      <p className="text-xs text-gray-400 mt-2">{history[0]} = {factorsFound.map(f => `${f}`).join(' × ')}</p>
                    </div>
                  )}
                </div>
              </div>
            </div>
          );
        };

        // --- MODÜL 4: RADAR KULESİ (Ortak Katlar) ---
        const RadarModule = ({ onBack }) => {
          const [signalA, setSignalA] = useState(4);
          const [signalB, setSignalB] = useState(6);
          const [time, setTime] = useState(0);
          const [isRunning, setIsRunning] = useState(false);
          const commonMultiple = lcm(signalA, signalB);

          // İlerleme Mantığı
          useEffect(() => {
            let interval;
            if (isRunning) {
              interval = setInterval(() => {
                setTime(t => {
                  // EKOK'u biraz geçince (görmesi için 3 saniye daha) durdur
                  if (t >= commonMultiple + 3) { 
                    setIsRunning(false);
                    return t;
                  }
                  return t + 1;
                });
              }, 800); // Biraz daha yavaş (800ms) ki anlaşılsın
            }
            return () => clearInterval(interval);
          }, [isRunning, commonMultiple]);

          const reset = () => {
            setTime(0);
            setIsRunning(false);
          };

          const stepForward = () => {
             setIsRunning(false);
             if (time < commonMultiple + 3) {
                 setTime(t => t + 1);
             }
          };

          const handleSliderChange = (setter) => (e) => {
            setter(parseInt(e.target.value));
            reset();
          };
          
          // Anlık durum kontrolleri
          const isA_Active = time > 0 && time % signalA === 0;
          const isB_Active = time > 0 && time % signalB === 0;
          const isSync = isA_Active && isB_Active;

          return (
            <div className="flex flex-col items-center w-full max-w-4xl p-4 bg-cyan-950 text-cyan-50 rounded-xl shadow-2xl border border-cyan-800 animate-in">
              <div className="flex justify-between w-full mb-6 items-center">
                <button onClick={onBack} className="flex items-center text-cyan-300 hover:text-white transition"><IconArrowLeft className="mr-2" /> Ana Menü</button>
                <h2 className="text-2xl font-bold text-cyan-400 flex items-center"><IconRepeat className="mr-2"/> Radar Senkronu</h2>
              </div>
              
              {/* Üst Panel: Radar İstasyonları Görseli */}
              <div className="flex justify-around w-full mb-6 bg-cyan-900/20 p-4 rounded-xl border border-cyan-800">
                  <div className="flex flex-col items-center">
                      <div className={`w-24 h-24 rounded-full flex items-center justify-center border-4 transition-all duration-300 relative ${isA_Active ? 'bg-pink-500 border-pink-300 shadow-[0_0_30px_#ec4899] scale-110' : 'bg-pink-900/20 border-pink-800 opacity-60'}`}>
                         <IconRadio size={48} className={isA_Active ? 'text-white' : 'text-pink-700'}/>
                         {isA_Active && <div className="absolute inset-0 rounded-full ring-animate border-4 border-pink-400"></div>}
                      </div>
                      <div className="mt-2 text-pink-300 font-bold">A İstasyonu</div>
                      <div className="text-xs text-pink-400/70">Her {signalA} saniyede</div>
                  </div>
                  
                  <div className="flex flex-col items-center justify-center">
                       <div className={`text-3xl font-mono font-bold px-6 py-2 rounded-lg border border-cyan-700 bg-black/50 ${isSync ? 'text-green-400 animate-pulse' : 'text-white'}`}>
                           {time} sn
                       </div>
                       <div className="text-xs text-cyan-500 mt-1">Geçen Süre</div>
                  </div>

                  <div className="flex flex-col items-center">
                      <div className={`w-24 h-24 rounded-full flex items-center justify-center border-4 transition-all duration-300 relative ${isB_Active ? 'bg-yellow-500 border-yellow-300 shadow-[0_0_30px_#eab308] scale-110' : 'bg-yellow-900/20 border-yellow-800 opacity-60'}`}>
                         <IconRadio size={48} className={isB_Active ? 'text-white' : 'text-yellow-700'}/>
                         {isB_Active && <div className="absolute inset-0 rounded-full ring-animate border-4 border-yellow-400"></div>}
                      </div>
                      <div className="mt-2 text-yellow-300 font-bold">B İstasyonu</div>
                      <div className="text-xs text-yellow-400/70">Her {signalB} saniyede</div>
                  </div>
              </div>
              
              {/* Durum Mesajı */}
              <div className="h-8 mb-4 text-center">
                  {isSync && <span className="text-green-400 font-bold text-lg animate-bounce">⚠️ SENKRONİZASYON BAŞARILI! (ORTAK KAT) ⚠️</span>}
                  {!isSync && isA_Active && <span className="text-pink-400 font-bold">A İstasyonu Sinyal Gönderiyor...</span>}
                  {!isSync && isB_Active && <span className="text-yellow-400 font-bold">B İstasyonu Sinyal Gönderiyor...</span>}
              </div>

              {/* Slider Kontrolleri */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-8 w-full mb-8">
                <div className="bg-cyan-900/40 p-4 rounded-lg border border-cyan-700">
                  <label className="block text-sm font-bold text-pink-400 mb-2">A Sinyal Periyodu: {signalA} sn</label>
                  <input type="range" min="2" max="8" value={signalA} onChange={handleSliderChange(setSignalA)} className="w-full accent-pink-500 h-2 bg-gray-700 rounded cursor-pointer" />
                </div>

                <div className="bg-cyan-900/40 p-4 rounded-lg border border-cyan-700">
                  <label className="block text-sm font-bold text-yellow-400 mb-2">B Sinyal Periyodu: {signalB} sn</label>
                  <input type="range" min="2" max="10" value={signalB} onChange={handleSliderChange(setSignalB)} className="w-full accent-yellow-500 h-2 bg-gray-700 rounded cursor-pointer" />
                </div>
              </div>

              {/* Gelişmiş Zaman Çizelgesi (Ruler View) */}
              <div className="w-full bg-black/40 p-4 rounded-xl border border-cyan-700 relative mb-6 overflow-x-auto">
                <div className="min-w-[600px]"> {/* Yatay kaydırma için min-width */}
                    <div className="flex border-b border-gray-700 pb-2 mb-2">
                        {Array.from({length: commonMultiple + 5}).map((_, i) => (
                            <div key={i} className="flex-1 flex flex-col items-center relative">
                                <span className={`text-[10px] mb-1 ${i === time ? 'text-white font-bold scale-125' : 'text-gray-600'}`}>{i}</span>
                                <div className={`w-0.5 h-3 ${i % 5 === 0 ? 'bg-gray-500' : 'bg-gray-800'}`}></div>
                            </div>
                        ))}
                    </div>

                    {/* A Sinyali Satırı */}
                    <div className="flex h-8 items-center mb-1 relative">
                        <span className="absolute -left-2 text-xs text-pink-500 font-bold w-4 text-center">A</span>
                        {Array.from({length: commonMultiple + 5}).map((_, i) => (
                            <div key={i} className="flex-1 flex justify-center border-l border-gray-800/20 h-full items-center">
                                {i > 0 && i % signalA === 0 && (
                                    <div className={`w-4 h-4 rounded shadow-sm transition-all duration-300 ${i <= time ? 'bg-pink-500 shadow-[0_0_5px_#ec4899]' : 'bg-pink-900/20 border border-pink-900'}`}></div>
                                )}
                            </div>
                        ))}
                    </div>

                    {/* B Sinyali Satırı */}
                    <div className="flex h-8 items-center relative">
                        <span className="absolute -left-2 text-xs text-yellow-500 font-bold w-4 text-center">B</span>
                        {Array.from({length: commonMultiple + 5}).map((_, i) => (
                            <div key={i} className="flex-1 flex justify-center border-l border-gray-800/20 h-full items-center">
                                {i > 0 && i % signalB === 0 && (
                                    <div className={`w-4 h-4 rounded shadow-sm transition-all duration-300 ${i <= time ? 'bg-yellow-500 shadow-[0_0_5px_#eab308]' : 'bg-yellow-900/20 border border-yellow-900'}`}></div>
                                )}
                            </div>
                        ))}
                    </div>
                    
                     {/* İmleç */}
                     <div 
                        className="absolute top-0 bottom-0 w-0.5 bg-cyan-400 z-10 transition-all duration-300 shadow-[0_0_10px_cyan]"
                        style={{ left: `calc(${(time / (commonMultiple + 4)) * 100}%)` }} // Basit hizalama
                     ></div>
                 </div>
              </div>

              {/* Kontrol Butonları */}
              <div className="flex gap-4">
                <button onClick={() => setIsRunning(!isRunning)} className="flex items-center gap-2 bg-cyan-600 hover:bg-cyan-500 px-6 py-3 rounded-lg font-bold transition">
                  {isRunning ? "Durdur" : "Otomatik Başlat"} <IconPlay size={20} className={isRunning ? "" : "ml-1"}/>
                </button>
                <button onClick={stepForward} className="flex items-center gap-2 bg-blue-600 hover:bg-blue-500 px-6 py-3 rounded-lg font-bold transition border border-blue-500">
                  +1 Sn İlerle
                </button>
                <button onClick={reset} className="flex items-center gap-2 bg-cyan-900 hover:bg-cyan-800 px-6 py-3 rounded-lg font-bold transition border border-cyan-700">
                  Sıfırla <IconRefreshCw size={20}/>
                </button>
              </div>

              <div className="mt-6 p-4 bg-cyan-900/30 rounded-lg text-center w-full max-w-lg border border-cyan-800">
                <p className="text-cyan-200">
                  <IconInfo className="inline mr-2 w-4 h-4"/>
                  EKOK({signalA}, {signalB}) = <span className="text-white font-bold text-lg">{commonMultiple}</span>
                </p>
                <p className="text-sm text-cyan-400 mt-1">İki radar tam {commonMultiple}. saniyede aynı anda sinyal gönderir.</p>
              </div>

            </div>
          );
        };

        // --- ANA UYGULAMA ---
        const App = () => {
          const [view, setView] = useState('menu');

          const renderView = () => {
            switch(view) {
              case 'cargo': return <CargoModule onBack={() => setView('menu')} />;
              case 'security': return <SecurityModule onBack={() => setView('menu')} />;
              case 'refinery': return <RefineryModule onBack={() => setView('menu')} />;
              case 'radar': return <RadarModule onBack={() => setView('menu')} />;
              default: return (
                <div className="flex flex-col items-center w-full max-w-5xl animate-in">
                  <header className="text-center mb-12 animate-in fade-in slide-in-from-top duration-700 flex flex-col items-center">
                    <img src="https://ogrenci.e12.com.tr/logo/tr/logo.svg" alt="Logo" className="h-20 mb-6 drop-shadow-[0_0_15px_rgba(255,255,255,0.2)]" />
                    <h1 className="text-4xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-600 via-red-500 to-orange-500 mb-4 drop-shadow-sm">
                      GALAKTİK MATEMATİK
                    </h1>
                    <p className="text-slate-400 text-lg md:text-xl">6. Sınıf Uzay İstasyonu Simülasyonu</p>
                  </header>

                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6 w-full px-4">
                    
                    <button onClick={() => setView('cargo')} className="group relative overflow-hidden bg-slate-800 hover:bg-slate-700 border border-slate-700 p-8 rounded-2xl text-left transition-all duration-300 hover:shadow-[0_0_20px_rgba(59,130,246,0.5)] hover:-translate-y-1">
                      <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                        <IconBox size={100} />
                      </div>
                      <div className="relative z-10">
                        <div className="bg-blue-500/20 w-12 h-12 rounded-lg flex items-center justify-center mb-4 text-blue-400">
                          <IconBox size={28} />
                        </div>
                        <h3 className="text-2xl font-bold text-white mb-2">Kargo Lojistiği</h3>
                        <p className="text-slate-400 text-sm">Çarpanlar ve Katlar. Kutuları dizerek dikdörtgen alanlar oluştur.</p>
                      </div>
                    </button>

                    <button onClick={() => setView('security')} className="group relative overflow-hidden bg-slate-800 hover:bg-slate-700 border border-slate-700 p-8 rounded-2xl text-left transition-all duration-300 hover:shadow-[0_0_20px_rgba(168,85,247,0.5)] hover:-translate-y-1">
                      <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                        <IconShieldCheck size={100} />
                      </div>
                      <div className="relative z-10">
                        <div className="bg-purple-500/20 w-12 h-12 rounded-lg flex items-center justify-center mb-4 text-purple-400">
                          <IconShieldCheck size={28} />
                        </div>
                        <h3 className="text-2xl font-bold text-white mb-2">Güvenlik Kapısı</h3>
                        <p className="text-slate-400 text-sm">Bölünebilme Kuralları. Kriterlere uymayan gemileri tespit et.</p>
                      </div>
                    </button>

                    <button onClick={() => setView('refinery')} className="group relative overflow-hidden bg-slate-800 hover:bg-slate-700 border border-slate-700 p-8 rounded-2xl text-left transition-all duration-300 hover:shadow-[0_0_20px_rgba(245,158,11,0.5)] hover:-translate-y-1">
                      <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                        <IconZap size={100} />
                      </div>
                      <div className="relative z-10">
                        <div className="bg-amber-500/20 w-12 h-12 rounded-lg flex items-center justify-center mb-4 text-amber-400">
                          <IconZap size={28} />
                        </div>
                        <h3 className="text-2xl font-bold text-white mb-2">Yakıt Rafinerisi</h3>
                        <p className="text-slate-400 text-sm">Asal Çarpanlar. Bileşik yakıtları atomlarına (asallara) ayır.</p>
                      </div>
                    </button>

                    <button onClick={() => setView('radar')} className="group relative overflow-hidden bg-slate-800 hover:bg-slate-700 border border-slate-700 p-8 rounded-2xl text-left transition-all duration-300 hover:shadow-[0_0_20px_rgba(6,182,212,0.5)] hover:-translate-y-1">
                      <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                        <IconRepeat size={100} />
                      </div>
                      <div className="relative z-10">
                        <div className="bg-cyan-500/20 w-12 h-12 rounded-lg flex items-center justify-center mb-4 text-cyan-400">
                          <IconRepeat size={28} />
                        </div>
                        <h3 className="text-2xl font-bold text-white mb-2">Radar Senkronu</h3>
                        <p className="text-slate-400 text-sm">Ortak Katlar (EKOK). İki sinyalin ne zaman buluştuğunu keşfet.</p>
                      </div>
                    </button>

                  </div>
                </div>
              );
            }
          };
          
          return (
            <div className="min-h-screen bg-slate-950 text-slate-200 font-sans flex items-center justify-center p-4">
              {renderView()}
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>